:root{
  --radius: 32px;
  --gap: 12px;
  --speed: 480ms;
  --easing: cubic-bezier(.2,.8,.2,1);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
html[data-theme="dark"]{ color-scheme: dark; }

body{
  margin:0;
  font-family: 'Mulish', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  display:grid;
  place-items:center;
  background: canvas;
  color: CanvasText;
}

.wrapper{ width:min(96vw, 1280px); position:relative; }

.container{
  display:flex;
  gap: var(--gap);
  width:100%;
  height: clamp(360px, 70vh, 720px);
}

.panel{
  position:relative;
  isolation:isolate;
  flex: .6 1 0%;
  border:0;
  padding:0;
  border-radius: var(--radius);
  cursor:pointer;
  overflow:hidden;
  display:flex;
  align-items:flex-end;
  justify-content:flex-start;
  transition: flex var(--speed) var(--easing);
  outline-offset: 4px;
  background: none;
}

.panel img{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:cover;
  filter: saturate(1.05);
  z-index:-2;
}

.panel .overlay{
  position:absolute; inset:0;
  z-index:-1;
  background: linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,.05));
}

.panel h3{
  margin: 20px;
  font-weight:800;
  letter-spacing:.2px;
  color: #fff;
  text-shadow: 0 2px 8px rgba(0,0,0,.35);
  opacity:.0;
  transform: translateY(8px);
  transition: opacity 300ms var(--easing), transform 300ms var(--easing);
}

.panel.active{ flex: 5 1 0%; }
.panel.active h3{ opacity:1; transform:none; }

/* Focus y accesibilidad */
.panel:focus-visible{ outline: 3px solid Highlight; }

/* Panel de control */
.controls{
  position:absolute;
  top:12px; right:12px;
  background: color-mix(in oklab, Canvas, CanvasText 6%);
  border: 1px solid color-mix(in oklab, CanvasText, transparent 80%);
  box-shadow: 0 6px 24px rgba(0,0,0,.08);
  padding: 10px 12px;
  border-radius: 12px;
  display: grid;
  gap: 8px;
  min-width: 240px;
  z-index: 10;
}
.controls__row{ display:grid; grid-template-columns: 1fr auto; align-items:center; gap:8px; }
.controls label{ font-size:.9rem; }
.controls input[type="range"]{ width: 160px; }
.controls output{ font-variant-numeric: tabular-nums; }
.switch{ display:flex; align-items:center; gap:8px; }

/* Responsive con scroll-snap en m√≥vil: no ocultamos paneles */
@media (max-width: 560px){
  .container{
    height: 64vh;
    overflow-x:auto;
    scroll-snap-type: x mandatory;
    padding-bottom: 8px;
  }
  .panel{
    flex: 0 0 85vw;
    scroll-snap-align: center;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .panel{ transition: none; }
  .panel h3{ transition: none; }
}

/* Utilidad para ocultar h1 visualmente pero mantenerlo accesible */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
